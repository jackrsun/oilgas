<html>

<head>
  <meta charset="UTF-8">
  <title>Oil and Gas</title>
  <link rel="stylesheet" href="MapLayout.css" />

  <!--stylesheets-->
  <!--MAKE LEAFLET.CSS FILE LOCAL AGAIN IN ORDER FOR SOME POINTS TO SHOW-->
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.2.0/dist/leaflet.css" />
  <link rel="stylesheet" href="jquery-ui.css" />

  <!--scripts-->
  <script src="leaflet.js" type="text/javascript"></script>
  <script src="jquery-min.js" type="text/javascript"></script>
  <script src="jquery-ui.js" type="text/javascript"></script>

  <!--minimap plugin-->
  <link rel="stylesheet" href="Control.MiniMap.css" />
  <script src="Control.MiniMap.js" type="text/javascript"></script>

  <!--minimap2 plugin-->
  <link rel="stylesheet" href="Control.MiniMap2.css" />
  <script src="Control.MiniMap2.js" type="text/javascript"></script>

  <!--marker cluster plugin-->
  <link rel="stylesheet" href="MarkerCluster.css" />
  <link rel="stylesheet" href="MarkerCluster.Default.css" />
  <script src="leaflet.markercluster-src.js"></script>
  <script src="leaflet.markercluster.layersupport-src.js"></script>

  <!--slider control plugin-->
  <script src="SliderControl.js" type="text/javascript"></script>

  <!--layer selection plugin-->
  <link rel="stylesheet" href="leaflet-panel-layers.css" />
  <link rel="stylesheet" href="icons.css" />
  <script src="leaflet-panel-layers.js"></script>
  
  <!--Load in layers-->
  <script src="bar.js"></script>
  <script src="Shale/Antrim.js"></script>
  <script src="Shale/Appalachian1.js"></script>
  <script src="Shale/Appalachian2.js"></script>
  <script src="Shale/Atoka.js"></script>
  <script src="Shale/Barnette1.js"></script>
  <script src="Shale/Barnette2.js"></script>
  <script src="Shale/Barnette3.js"></script>
  <script src="Shale/Bossier.js"></script>
  <script src="Shale/Cane.js"></script>
  <script src="Shale/Caney.js"></script>
  <script src="Shale/EagleFord.js"></script>
  <script src="Shale/Fayetteville1.js"></script>
  <script src="Shale/Fayetteville2.js"></script>
  <script src="Shale/GothicChim.js"></script>
  <script src="Shale/Haynesville.js"></script>
  <script src="Shale/Marcellus.js"></script>
  <script src="Shale/Marcellus2.js"></script>
  <script src="Shale/Marcellus3.js"></script>
  <script src="Shale/NewAlbany.js"></script>
  <script src="Shale/Niobrara.js"></script>
  <script src="Shale/Pearsail.js"></script>
  <script src="Shale/Shublik.js"></script>
  <script src="Shale/Shublik2.js"></script>
  <script src="Shale/Utica.js"></script>
  <script src="Shale/Woodford.js"></script>
  <script src="Shale/Woodford2.js"></script>
  <script src="Shale/Woodford3.js"></script>
  <script src="Shale/WoodfordBarnett.js"></script>

  <style>
    #mapId {
      position: relative;
      width: 100%;
      height: 100%;
    }
  </style>
</head>

<body>

  <div id="mapId"></div>

  <script type="text/javascript">

    var sliderControl = null;

    var map = L.map('mapId')
    var MapURL = 'https://api.mapbox.com/styles/v1/roach202/cj6zhmvp60hdv2qn21eholv3s/tiles/256/{z}/{x}/{y}?access_token=pk.eyJ1Ijoicm9hY2gyMDIiLCJhIjoiY2o2emhrNmM1MDBrNzJxcWpvdmdncjVhYSJ9.HjiuTPR8ggkOhHhqcs_5dQ'
    var attribution = '&copy; <a href=”https://www.mapbox.com/about/maps/”>Mapbox</a> &copy; <a href=”http://www.openstreetmap.org/copyright”>OpenStreetMap</a>'
    var MainMap = new L.TileLayer(MapURL, { minZoom: 0, maxZoom: 15, attribution: attribution });

    //adds basemap as a layer
    map.addLayer(MainMap);

    //adds basemap to page
    //MainMap.addTo(map);

    map.setView(new L.LatLng(39.754229, -98.127826), 5);

    var MapURL2 = 'https://api.mapbox.com/styles/v1/mapbox/satellite-streets-v10/tiles/256/{z}/{x}/{y}?access_token=pk.eyJ1Ijoia2l3ayIsImEiOiJjajZ6aGJ2bGYyODBnMnh1aGVuMGdyOXc5In0.1WPUe4BtGuMQLegynCczeQ'
    var MainMap2 = new L.TileLayer(MapURL2, { minZoom: 0, maxZoom: 13 });
    var miniMap = new L.Control.MiniMap(MainMap2, { toggleDisplay: true }).addTo(map);



    //Gets icon for name in panel
    function iconByName(name) {
        return '<i class="icon icon-'+name+'"></i>';
      }

    //Adds icon next to name in panel
    function featureToMarker(feature, latlng) {
        return L.marker(latlng, {
          icon: L.divIcon({
            className: 'marker-'+feature.properties.amenity,
            html: iconByName(feature.properties.amenity),
            iconUrl: '../images/markers/'+feature.properties.amenity+'.png',
            iconSize: [25, 41],
            iconAnchor: [12, 41],
            popupAnchor: [1, -34],
            shadowSize: [41, 41]
          })
        });
      }
      
      //Use for individual layers only
      /* var overLayers = [
      {
          name: "Bar", //Visible name on panel
          icon: iconByName('bar'), //Icon displayed next to name
          layer: L.geoJson(Bar, {pointToLayer: featureToMarker })
      },
      {
        name: "Antrim",
        icon: iconByName('Shale'),
        layer: L.geoJson(Antrim,
        {
          style: {color: "red", opacity: .5, weight: .5}
        })
      },
      {
        name: "Appalachian1",
        icon: iconByName('Shale'),
        layer: L.geoJson(Appalachian1,
        {
          style: {color: "red", opacity: .5, weight: .5}
        })
      }
    ]; */

    //Use to create a group with layers in it
    var overLayers = [
        {
          group: "Shale Plays",
          //name: "Antrim",
          icon: iconByName('Shale'),
          collapsed: true,
          //layer: L.geoJson(Antrim,
          layers: [
            {
              name: "Antrim",
              icon: iconByName ('Shale'),
              layer: L.geoJson(Antrim, {
              style: {color: "red", opacity: .5, weight: .5}
            })
          },
          {
            name: "Appalachian1",
            icon: iconByName('Shale'),
            layer: L.geoJson(Appalachian1,
            {
              style: {color: "red", opacity: .5, weight: .5}
            })
          },
          {
            name: "Appalachian2",
            icon: iconByName('Shale'),
            layer: L.geoJson(Appalachian2,
            {
              style: {color: "red", opacity: .5, weight: .5}
            })
          },
          {
            name: "Atoka",
            icon: iconByName('Shale'),
            layer: L.geoJson(Atoka,
            {
              style: {color: "red", opacity: .5, weight: .5}
            })
          },
          {
            name: "Barnette1",
            icon: iconByName('Shale'),
            layer: L.geoJson(Barnette1,
            {
              style: {color: "red", opacity: .5, weight: .5}
            })
          },
          {
            name: "Barnette2",
            icon: iconByName('Shale'),
            layer: L.geoJson(Barnette2,
            {
              style: {color: "red", opacity: .5, weight: .5}
            })
          },
          {
            name: "Barnette3",
            icon: iconByName('Shale'),
            layer: L.geoJson(Barnette3,
            {
              style: {color: "red", opacity: .5, weight: .5}
            })
          },
          {
            name: "Bossier",
            icon: iconByName('Shale'),
            layer: L.geoJson(Bossier,
            {
              style: {color: "red", opacity: .5, weight: .5}
            })
          },
          {
            name: "Cane",
            icon: iconByName('Shale'),
            layer: L.geoJson(Cane,
            {
              style: {color: "red", opacity: .5, weight: .5}
            })
          },
          {
            name: "Caney",
            icon: iconByName('Shale'),
            layer: L.geoJson(Caney,
            {
              style: {color: "red", opacity: .5, weight: .5}
            })
          },
          {
            name: "EagleFord",
            icon: iconByName('Shale'),
            layer: L.geoJson(EagleFord,
            {
              style: {color: "red", opacity: .5, weight: .5}
            })
          },
          {
            name: "Fayetteville1",
            icon: iconByName('Shale'),
            layer: L.geoJson(Fayetteville1,
            {
              style: {color: "red", opacity: .5, weight: .5}
            })
          },
          {
            name: "Fayetteville2",
            icon: iconByName('Shale'),
            layer: L.geoJson(Fayetteville2,
            {
              style: {color: "red", opacity: .5, weight: .5}
            })
          },
          {
            name: "GothicChim",
            icon: iconByName('Shale'),
            layer: L.geoJson(GothicChim,
            {
              style: {color: "red", opacity: .5, weight: .5}
            })
          },
          {
            name: "Haynesville",
            icon: iconByName('Shale'),
            layer: L.geoJson(Haynesville,
            {
              style: {color: "red", opacity: .5, weight: .5}
            })
          },
          {
            name: "Marcellus",
            icon: iconByName('Shale'),
            layer: L.geoJson(Marcellus,
            {
              style: {color: "red", opacity: .5, weight: .5}
            })
          },
          {
            name: "Marcellus2",
            icon: iconByName('Shale'),
            layer: L.geoJson(Marcellus2,
            {
              style: {color: "red", opacity: .5, weight: .5}
            })
          },
          {
            name: "Marcellus3",
            icon: iconByName('Shale'),
            layer: L.geoJson(Marcellus3,
            {
              style: {color: "red", opacity: .5, weight: .5}
            })
          },
          {
            name: "NewAlbany",
            icon: iconByName('Shale'),
            layer: L.geoJson(NewAlbany,
            {
              style: {color: "red", opacity: .5, weight: .5}
            })
          },
          {
            name: "Niobrara",
            icon: iconByName('Shale'),
            layer: L.geoJson(Niobrara,
            {
              style: {color: "red", opacity: .5, weight: .5}
            })
          },
          {
            name: "Pearsail",
            icon: iconByName('Shale'),
            layer: L.geoJson(Pearsail,
            {
              style: {color: "red", opacity: .5, weight: .5}
            })
          },
          {
            name: "Shublik",
            icon: iconByName('Shale'),
            layer: L.geoJson(Shublik,
            {
              style: {color: "red", opacity: .5, weight: .5}
            })
          },
          {
            name: "Shublik2",
            icon: iconByName('Shale'),
            layer: L.geoJson(Shublik2,
            {
              style: {color: "red", opacity: .5, weight: .5}
            })
          },
          {
            name: "Utica",
            icon: iconByName('Shale'),
            layer: L.geoJson(Utica,
            {
              style: {color: "red", opacity: .5, weight: .5}
            })
          },
          {
            name: "Woodford",
            icon: iconByName('Shale'),
            layer: L.geoJson(Woodford,
            {
              style: {color: "red", opacity: .5, weight: .5}
            })
          },
          {
            name: "Woodford2",
            icon: iconByName('Shale'),
            layer: L.geoJson(Woodford2,
            {
              style: {color: "red", opacity: .5, weight: .5}
            })
          },
          {
            name: "Woodford3",
            icon: iconByName('Shale'),
            layer: L.geoJson(Woodford3,
            {
              style: {color: "red", opacity: .5, weight: .5}
            })
          },
          {
            name: "WoodfordBarnett",
            icon: iconByName('Shale'),
            layer: L.geoJson(WoodfordBarnett,
            {
              style: {color: "red", opacity: .5, weight: .5}
            })
          }
          

        ]
      }
    ];

      //Creates base layer for panel
      var baseLayers = [
      {
        group: "Road Layers",
        icon: iconByName('parking'),
        collapsed: true,
        layers: [
          {
            name: "Open Cycle Map",
            icon: iconByName('drinking_water'),
            layer: L.tileLayer('http://{s}.tile.opencyclemap.org/cycle/{z}/{x}/{y}.png')
          }
        ]
      }
    ];
      
    //Creates panelLayers (combo of base and overlay layers) to be added to map
    var panelLayers = new L.Control.PanelLayers(baseLayers, overLayers, {
       collapsibleGroups: true,
       collapsed: true
    });

    //Adds layer control to map
    map.addControl(panelLayers);


    //Colors each point based on CELLSYMB
    function pointToCircle(feature, LatLng) {

      var fillColorVar = "";

      switch (true) {

        case (feature.properties.CELLSYMB === 1):
          fillColorVar = "#1ed817"; //Green
          break;
        case (feature.properties.CELLSYMB === 2):
          fillColorVar = "#30c8f2"; //Blue
          break;
        case (feature.properties.CELLSYMB === 3):
          fillColorVar = "#dd42b4"; //Purple
          break;
        case (feature.properties.CELLSYMB === 4):
          fillColorVar = "#ada7a6"; //Grey
          break;

      }

      //Sets features for marker
      var geojsonMarkerOptions = {
        radius: 8,
        fillColor: fillColorVar,
        color: "",
        weight: 2,
        opacity: 1,
        fillOpacity: 0.8
      };

      var circleMarker = L.circleMarker(LatLng, geojsonMarkerOptions);

      return circleMarker;

    }

    //Adds popup to each point
    function addPopups(feature, testlayer) {
      //Check what the CELLSYMB is and label it accordingly
      if (feature.properties && feature.properties.CELLSYMB) {
        if (feature.properties.CELLSYMB === 1) {
          testlayer.bindPopup("Mining Type: Oil")
        }
        else if (feature.properties.CELLSYMB === 2) {
          testlayer.bindPopup("Mining Type: Gas")
        }
        else if (feature.properties.CELLSYMB === 3) {
          testlayer.bindPopup("Mining Type: Both")
        }
        else if (feature.properties.CELLSYMB === 4) {
          testlayer.bindPopup("Mining Type: Dry Well")
        }
      }
    }


    //Fetch data from "points" GeoJSON file
    $.getJSON("ExtractionZones/1900to1909Centroids.json", function (json) {
      //Adds popup with mining type and color
      var testlayer = L.geoJson(json,
        {
          onEachFeature: addPopups,
          pointToLayer: pointToCircle

          //Used to color polygons
          /* style: function(feature)
          {
            switch (feature.properties.CELLSYMB)
            {
              case 1: return {color: "green", weight: 1, fillOpacity: 0.2} //What type is 1?
              case 2: return {color: 'blue', weight: 1, fillOpacity: 0.2} //What type is 2?
              case 3: return {color: 'yellow', weight: 1 ,fillOpacity: 0.2} //What type is 3?
              case 4: return {color: 'orange', weight: 1, fillOpacity: 0.2} //What type is 4?
            }
          } */

        }
      );
      //end


      // Check into MCG Layer Support!
      // Add to map first before checking in.
      // Adds marker cluster to map
      L.markerClusterGroup.layerSupport().addTo(map).checkIn(testlayer);

      var sliderControl = L.control.sliderControl
      (
        {
          position: "topright",
          layer: testlayer
          //add comma after testlayer to use range (below)
          //range: true
        }
        )

        //Adds the slider to the map
        map.addControl(sliderControl);
        

        //Initializes the slider
        sliderControl.startSlider();
      });



  </script>
</body>

</html>